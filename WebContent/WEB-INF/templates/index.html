<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security" >
<head>
<div th:replace="~{includes/bootstrap :: bootstrapMeta}" />
<title>PokeForum - Homepage</title>
<div th:replace="~{includes/bootstrap :: bootstrapCSS}" />
<!-- Bootstrap CSS CDN -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- Our Custom CSS -->
<link rel="stylesheet" href="css/custom.css">
<link rel="stylesheet" href="includes/table.css">
<style>
.wrapper {
    display: flex;
    align-items: stretch;
}

#sidebar {
    min-width: 250px;
    max-width: 250px;
    
}

#sidebar.active {
    margin-left: -250px;
}
</style>
</head>
<body>
	<div class="container" role="main">

		<div class="page-header">
			<a href="index"><img src="images/PokeForumLogo.jpg"></a>
		</div>

		<!--  Error message ----------------------------------------------------------- -->
		<div th:unless="${errorMessage} == null" th:utext="${errorMessage}"
			class="alert alert-danger" role="alert"></div>
		<!--  Error message ----------------------------------------------------------- -->

		<!--  Warning message ----------------------------------------------------------- -->
		<div th:unless="${warningMessage} == null" th:utext="${warningMessage}"
			class="alert alert-warning" role="warning"></div>
		<!--  Warning message ----------------------------------------------------------- -->

		<!--   message ----------------------------------------------------------- -->
		<div th:unless="${message} == null" th:utext="${message}"
			class="alert alert-success" role="warning"></div>
		<!--   message ----------------------------------------------------------- -->

		<nav th:replace="~{includes/sidebar}"></nav>

		<!--  1 simple button ----------------------------------------------------------- -->
		<div class="row">
		</div>
		<!--  1 simple button ----------------------------------------------------------- -->


	<div class="row">
			<div class="col-md-10 col-md-offset-1">

				<table data-toggle="table" class="table table-striped">
					<thead class="thead-dark">
						<tr>
							<th>Topic name</th>
							<th><span class="glyphicon glyphicon-user"></span>User</th>
							<th><span class="glyphicon glyphicon-pencil"></span>Last edited</th>
							<th><span class="glyphicon glyphicon-th-list"></span>Entries</th>				
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						
						<!--  list all items ----------------------------------------------------------- -->
						<tr th:each="topic : ${topics}">
							<td th:text="${topic.title}"></td>
							<td th:text="${topic.owner.userName}"></td>
							<td th:text="${topic.lastEdited}"></td>
							<td th:text="${topic.entries.size()}"></td>
							<td><a th:href="@{/listEntries(id=${topic.id})}" class="btn btn-xs btn-success">
									<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
									Visit
								</a>

								<a th:href="@{/deleteTopic(id=${topic.id})}" class="btn btn-xs btn-danger" >
									
									<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
									
									<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
									Delete
								</a>
							</td>
							
						</tr>
						<!--  list all items ----------------------------------------------------------- -->
					</tbody>
				</table>
				<a href="addTopic" class="btn btn-default">
				New Topic
				</a>				
			</div>
		</div>
		
	</div>
	<!--  End of container -->
	<div th:replace="~{includes/bootstrap :: bootstrapJS}" />
</body>
</html> 
