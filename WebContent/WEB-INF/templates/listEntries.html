<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	>
<head>
<div th:replace="~{includes/bootstrap :: bootstrapMeta}" />
<title>PokeForum - list Entries</title>
<div th:replace="~{includes/bootstrap :: bootstrapCSS}" />
</head>
<body>
	<div class="container" role="main">

		<div class="page-header">
			<a href="index"><img src="images/PokeForumLogo.jpg"></a>
		</div>

		<!--  Error message ----------------------------------------------------------- -->
		<div th:unless="${errorMessage} == null" th:utext="${errorMessage}"
			class="alert alert-danger" role="alert"></div>
		<!--  Error message ----------------------------------------------------------- -->

		<!--  Warning message ----------------------------------------------------------- -->
		<div th:unless="${warningMessage} == null" th:utext="${warningMessage}"
			class="alert alert-warning" role="warning"></div>
		<!--  Warning message ----------------------------------------------------------- -->

		<!--   message ----------------------------------------------------------- -->
		<div th:unless="${message} == null" th:utext="${message}"
			class="alert alert-success" role="warning"></div>
		<!--   message ----------------------------------------------------------- -->

		<nav th:replace="~{includes/sidebar}"></nav>

		<!--  1 simple button ----------------------------------------------------------- -->
		<div th:text="${topic.title}"></div>
		<div class="row">
			<div class="col-md-10 col-md-offset-1">

				<table data-toggle="table" class="table table-striped">
					<thead>
						<tr>
							<th>User</th>
							<th>Created</th>
							<th>Contend</th>
							<th sec:authorize="hasRole('USER')">Action</th>
						</tr>
					</thead>
					<tbody>
						
						<!--  list all items ----------------------------------------------------------- -->
						<tr th:each="entry : ${entries}">
							<td th:text="${entry.owner.userName}"></td>
							<td th:text="${entry.dateOfCreation}"></td>
							<td th:text="${entry.edited} ? ${entry.content}+' {entry was edited by owner or admin}' : ${entry.content}"></td>
							<td sec:authorize="hasRole('USER')"><a th:href="@{/editEntry(id=${entry.id})}" class="btn btn-xs btn-success">
									<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
									Edit
								</a>
								<a th:href="@{/deleteEntry(id=${entry.id},topicId=${topic.id})}" class="btn btn-xs btn-danger">
									
									<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
									
									<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
									Delete
								</a>
							</td>
							
						</tr>
						<!--  list all items ----------------------------------------------------------- -->
					</tbody>
				</table>
				<a sec:authorize="hasRole('USER')" th:href="@{/addEntry(topicId=${topic.id})}" class="btn btn-default">
				New Entry
				</a>				
			</div>
		</div>
		
	</div>
	<!--  End of container -->
	<div th:replace="~{includes/bootstrap :: bootstrapJS}" />
</body>
</html>